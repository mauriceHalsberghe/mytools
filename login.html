<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | Mytools</title>
</head>
<body>
    <main>
        <h1>Log in</h1>

        <form id="loginForm">
            <div>
                <label for="username">
                    Username
                </label>
                <input name="username" id="username" type="text">
            </div>

            <div>
                <label for="password">
                    Password
                </label>
                <input name="password" id="password" type="password">
            </div>

            <button type="submit">Login</button>

            <p>No Account yet? <a href="./register.html">Register</a></p>
        </form>
    </main>

    <script>
        document.getElementById("loginForm").addEventListener("submit", async e => {
          e.preventDefault();
          const form = new FormData(e.target);
          const res = await fetch("https://your-backend.onrender.com/login", {
            method: "POST",    // Ensure this is POST, not GET
            credentials: "include",   // Include session cookies for backend
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              username: form.get("username"),
              password: form.get("password")
            })
          });
      
          if (res.ok) {
            // Redirect after successful login
            location.href = "dashboard.html";
          } else {
            alert("Login failed. Please check your credentials.");
          }
        });
      </script>
</body>
</html>