<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | Mytools</title>
</head>
<body>
    <main>
        <h1>Log in</h1>

        <form id="loginForm">
            <input name="username" placeholder="Username" required>
            <input name="password" type="password" placeholder="Password" required>
            <button type="submit">Login</button>
          </form>
          

    </main>

    <script>
        document.getElementById("loginForm").addEventListener("submit", async e => {
          e.preventDefault();
          const form = new FormData(e.target);
          const res = await fetch("https://mytools-server.onrender.com/", {
            method: "POST",    // Ensure this is POST, not GET
            credentials: "include",   // Include session cookies for backend
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              username: form.get("username"),
              password: form.get("password")
            })
          });
      
          if (res.ok) {
            // Redirect after successful login
            location.href = "dashboard.html";
          } else {
            alert("Login failed. Please check your credentials.");
          }
        });
      </script>
</body>
</html>